# 321 - 6ee0168 [#105](https://github.com/vitejs/vite/pull/105) 修复浏览器无法打开的问题

主要是因为`ececa`包被放进了`devDependencies`，从而没有找到该包报错。

现在把`execa`包移动进`dependencies `。



# 322 - 32cf37f [#107](https://github.com/vitejs/vite/issues/107) 处理小写的`doctype`

**issues**: `<!doctype html>`会引起`vite build`崩溃。

原因：`@vue/compiler-core`没有处理小写的`doctype`为注释（按照标准）。

![1](1.png)

改动部分：

- `build/buildPluginHtml.ts`，替换`html`内容，把`doctype`改为大写，即`html.replace(/<!doctype\s/i, '<!DOCTYPE ')`

> 写个框架要注意的事情真的好多...



# 323 - 6776e76 防止jest警告的程序包名称不明确

`template-preact`: `package.json` `name`改为`vite-preact-starter`

`template-vue`: `package.json` `name`改为`vite-starter`

> 在`vite`的测试流没有看到，应该是尤大想知道开发者用了哪个模板



# 324 - 2320d3e changelog

## [0.13.2](https://github.com/vuejs/vite/compare/v0.13.1...v0.13.2) (2020-05-09)

### Bug Fixes

- -修复-open标志引起的错误 ([#105](https://github.com/vuejs/vite/issues/105)) ([6ee0168](https://github.com/vuejs/vite/commit/6ee016892d7b375cc8dd8cbc4dc10c03325d4dc8))
- 处理小写的doctypes (close [#107](https://github.com/vuejs/vite/issues/107)) ([32cf37f](https://github.com/vuejs/vite/commit/32cf37fd5125be7dd3b65de2024e89685d7cbc8e))
- 支持`<script src>`使用单引号  ([#106](https://github.com/vuejs/vite/issues/106)) ([9336dac](https://github.com/vuejs/vite/commit/9336dacaeaae37bd2adf36ab1816c063eddbd4eb))
- cva: package.json files 包括 template-* ([#100](https://github.com/vuejs/vite/issues/100)) ([122851e](https://github.com/vuejs/vite/commit/122851ee802c8e6374be42e704883e6ed91b0b02))

### Features

- 增强cli输出的信息，保持与vue-cli一样 ([#98](https://github.com/vuejs/vite/issues/98)) ([e00bf3a](https://github.com/vuejs/vite/commit/e00bf3a7fb029416c394e2606a3ce4ed8f3079b1))
- **cva:** 支持多种类型的模板 ([decbfc2](https://github.com/vuejs/vite/commit/decbfc2ee9e0c88c9e94a8f4f39032cdf5b5d6c5))



# 325 - b5cf006 v0.13.2

release v0.13.2



# 326 - 49e79e7 支持`build --ssr`

改动部分：

- `build/index.ts`：新增`ssr`选项，调用`ssrBuild`对`options`改造，输出的文件夹名称为`dist-ssr`。

> 不做深入探究`ssr`（因为我不熟悉，也不想深入熟悉┭┮﹏┭┮！！ 知道它是在服务端完成初始`vnode` -> `html`即可）[207](https://github.com/Kingbultsea/vite-analysis/blob/d0e223924b0656785fa14ac073ff78dcdfef818a/201-210/201-210.md#207---4808f41-build%E6%94%AF%E6%8C%81ssr)



# 327 - d6151bf [#104](https://github.com/vitejs/vite/pull/104) 为插件开发者暴露`rewriteImports` 方法

**pikax**: 我在编写一个基于路由的SSR插件，我需要编译SFC文件，并构建像`vite`的脚本。但是`vite`依赖中间件处理SFC文件路径。

**尤大**：为了一致性起见，我认为我们要么公开所有 `compileSFC*` 方法，要么不公开它们。但是，将它们公开意味着我们不能再将它们视为内部结构并自由调整参数。假设它们仅在开发服务器中使用，有时可能需要 `Koa context` - 这将使它们在其他地方无法使用。我认为直到`vite`变得更稳定更安全之前，你可以复制逻辑黏贴到你的插件中。

**pikax**：同意，在我的情况下，我只需要样式，其他的我基本上复制了逻辑。 `rewriteImports` 是否适合公开？

**尤大**：可以，`rewriteImports`可能是安全的，尽管我现在认为它是半内部的。你应该做好它可能会坏了的心理准备;)

![2](2.png)



# 328 - ab940fd 支持`config`文件配置`vite`

改动部分

- 新增`src/node/config.ts`: 提供`ServerConfig`, `BuildConfig`, `resolveConfig`给`cli`（详 **新增一**）

建议补充一下tree-shaking的原理，webpack4和rollup都在用它 [`sideEffects`](https://zhuanlan.zhihu.com/p/41795312)

## 新增一



