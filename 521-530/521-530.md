# 521 - 89fe0a9 支持从`.env`文件加载`env`属性 [#223](https://github.com/vitejs/vite/issues/223)

改动部分：

- `package.json`：新增`dotenv`包，`Dotenv `是一个零依赖模块，它将环境变量从` .env `文件加载到 `process.env` 中。
- `node/config.ts`：新增`env`，类型为`DotenvParseOutput`，可以直接通过`vite.config`配置，不需要`.env`文件；检测项目启动路径下的`.env`文件，有则直接调用`require('dotenv').config()`，同时覆盖`config.env`为`dotenv`配置后的对象字段。
- `node/build/index.ts`：与`NODE_ENV: 'production'`合并`config.env`，替换`process,env`。
- `node/server/serverPluginHtml.ts`：与`NODE_ENV: 'development'`合并`config.env`，替换`client`端的`window.process`。
- 添加测试。

